<!DOCTYPE php>
<php lang="en">

    <body>

        <div class="container des">
            <div class="row g-row">
                <h1 class=" abt-h1 mar-1 text-center">Events</h1>
                <div class="text-center mb-5">
                    <svg xmlns="http://www.w3.org/2000/svg" width="277" height="17" viewBox="0 0 277 17" fill="none">
                        <path
                            d="M124.731 12.7367L126.086 13.7014C124.449 15.2574 123.265 14.7076 124.539 16.0562C124.736 12.7367 129.803 15.7553 129.996 12.4358L130.888 13.1412C130.633 13.1101 130.592 13.3072 130.337 13.2657C132.072 14.8632 131.628 10.8694 133.866 11.357C134.646 11.6163 135.189 12.1038 134.655 12.498L136.395 11.6889C136.902 11.7615 136.776 12.3321 136.274 12.2698L138.924 12.0313L138.907 12.1246C139.288 11.6059 140.144 10.8072 140.561 10.4753C141.234 10.9524 140.225 10.8279 140.395 11.2429L141.866 10.4545C142.463 11.3155 141.243 12.1454 140.229 12.0105C141.593 15.3404 141.449 11.1806 144.404 13.1516L143.019 13.5561C143.911 15.4441 144.992 14.7698 146.557 15.9628C146.185 15.3508 143.427 12.9753 145.019 12.1661C145.467 12.4255 146.059 12.5499 146.92 11.886C146.925 13.0686 147.768 12.7885 148.817 12.7263L148.741 14.2927C149.875 13.857 149.79 13.0583 150.458 12.3632C151.723 12.5292 151.983 13.7428 152.279 14.7698C154.306 15.0395 150.884 12.8093 153.283 12.5396C154.965 13.1516 156.153 12.5395 158.167 11.6163C159.346 12.1661 157.961 12.5707 158.382 13.0271L159.432 11.7926C159.687 11.8238 159.602 12.2076 159.562 12.4047C160.445 11.9275 159.638 10.8383 161.023 10.4337C161.4 8.71173 163.862 12.9752 165.58 11.0458C166.001 11.4918 165.373 12.0001 165.503 12.6122C167.858 11.357 167.521 11.7097 169.454 10.0084L171.095 11.0562C169.889 9.86322 171.436 8.49394 172.791 7.3736C172.365 6.80306 171.997 6.29474 171.755 6.05615L173.916 5.24699C174.176 5.50633 173.956 6.04577 173.602 6.68892C173.75 6.56444 173.889 6.43997 173.997 6.31549C174.768 6.90678 174.365 7.79891 173.808 8.67028C173.548 8.35908 173.284 8.02713 173.033 7.69518C172.499 8.63916 171.997 9.68687 172.104 10.5997C172.243 10.4234 172.517 10.2678 172.813 10.1848C172.674 10.4441 172.584 10.6723 172.647 10.8279C172.719 10.9939 172.947 10.6516 173.302 10.2574L173.786 12.0105L173.907 11.3155L176.728 12.4462C178.755 10.7138 180.517 8.16197 183.728 7.4877C182.93 8.75326 183.553 9.57273 183.504 11.0873C182.634 9.46899 181.019 11.7304 179.356 11.3777C180.221 11.5541 180.028 12.2802 179.809 12.5292L182.777 11.1184C182.705 12.3528 183.405 12.052 184.176 12.581C183.598 10.1225 186.392 10.9835 187.598 10.247C187.67 11.0665 187.378 11.9068 185.907 11.6889C187.526 13.5562 188.015 8.84658 189.602 10.4337C189.244 10.4441 189.051 10.3197 188.907 10.7346C189.75 10.0188 191.8 10.6308 191.316 11.3362H190.957C193.342 11.6682 198.217 11.4814 198.58 9.40676C198.603 9.67647 198.262 11.9068 198.114 12.3217L202.392 5.40262C202.011 7.18686 203.437 11.4607 201.455 12.4358C202.02 12.6951 202.724 13.0064 203.921 12.4047C203.535 12.1454 202.966 9.81131 203.495 9.65571C204.944 11.6682 204.5 10.7346 206.284 12.4669C205.706 12.0727 206.361 9.28226 207.275 9.38599C207.132 9.80093 207.343 12.1557 207.006 12.4358L209.302 9.72833C208.728 10.2159 209.195 12.052 209.701 12.8404C209.468 12.3009 211.675 12.9337 212.284 12.664L211.32 12.0105C213.899 12.4773 213.881 8.19308 216.442 8.39018C216.128 8.95035 215.666 11.8652 216.962 12.2387C217.563 10.8383 219.625 5.51672 221.895 4.47937L222.325 5.28853L224.065 4.40675C222.975 6.50218 219.921 10.9006 218.258 12.6018C219.222 13.2553 218.522 13.5562 219.971 13.5147C220.477 14.2823 219.177 14.6454 218.751 14.6765L222.114 15.2262C221.971 13.5769 224.693 13.6288 224.572 12.2595L220.912 13.8881C220.769 12.2491 223.043 9.26153 225.428 9.60386C226.034 10.2678 224.962 12.5188 225.011 13.0686C225.321 12.5085 227.28 12.0416 227.495 12.4462L226.482 13.3072C227.805 13.9503 228.657 11.1806 230.244 12.7781C230.796 12.8922 231.881 14.9254 231.98 13.9607C231.087 12.0624 230.94 6.2636 231.54 4.86318C231.733 4.99804 234.424 6.72003 235.047 7.65364C235.949 9.14742 233.671 11.1288 234.437 12.4047C234.473 11.9586 234.975 11.4089 235.186 11.2429C235.765 11.6371 234.94 12.6329 236.2 12.4566C236.415 10.7968 238.756 12.6537 236.801 11.0562C238.034 10.6101 238.106 11.4192 239.55 11.3881C239.097 10.2989 240.859 7.75737 242.092 7.32168C242.016 7.747 242.294 8.30717 242.424 8.55613C244.944 8.78434 246.29 9.57272 248.639 9.65571C248.855 10.0603 249.985 10.5893 249.5 11.2947C249.841 11.0147 250.151 10.4545 250.877 10.4337C252.272 11.9171 249.263 10.6101 250.321 12.3735C250.415 11.4088 252.2 11.0873 253.236 10.5167C252.926 9.01258 250.855 10.1641 249.814 10.7346C249.819 8.67027 251.626 6.56447 254.088 5.68273C256.043 5.22629 254.926 7.04162 255.267 6.76154C258.931 7.22835 258.406 3.24495 261.442 4.82171C262.644 6.17026 261.483 7.43582 261.747 8.39018C260.155 8.84661 259.312 7.48765 258.231 7.5084L259.554 8.17232C259.048 8.59763 257.985 8.89845 257.406 8.49389C258.411 9.70758 263.599 8.89847 266.42 10.0707C266.927 9.64536 267.792 9.2097 267.389 8.67028L266.492 8.82585C265.676 7.74701 268.182 7.40469 267.052 6.88602C268.259 6.18062 269.608 5.03952 271.294 5.69305L271.604 7.19721C271.568 6.76152 270.505 6.27401 270.025 6.72007C270.734 6.07692 272.608 8.82585 273.389 6.88602L272.209 5.81759C273.42 5.10182 274.918 3.55617 276.411 4.06447C275.738 2.56032 276.066 4.22002 275.008 2.45653C275.918 4.63496 271.178 2.25947 272.649 4.56238C271.568 2.51881 270.761 3.65988 269.344 1.89639C269.384 2.39432 269.846 2.86109 268.59 2.58101C268.532 2.72624 268.398 2.90262 268.312 3.00636C268.272 2.98561 268.259 2.98563 268.227 2.96489C268.254 2.98563 268.272 3.00638 268.294 3.02713C268.241 3.09974 268.236 3.11007 268.321 3.04783C268.622 3.27604 268.859 3.53537 268.958 3.81545C268.33 4.93579 266.33 4.84246 265.649 5.40262C264.904 5.14329 265.963 4.84246 265.559 4.30304L264.545 5.15367C264.451 4.05408 262.572 3.27607 264.335 2.68478L262.752 2.59139C261.823 1.94824 260.545 1.66819 259.752 2.10387C259.007 1.84454 257.859 3.2657 258.514 2.42545L256.03 3.03745L256.007 2.75741C253.559 2.54994 250.958 4.42753 248.169 2.36321C247.343 2.61217 246.491 2.93371 245.115 2.58101L244.85 1.62667C243.792 1.9275 241.675 0.589329 241.218 1.56443C240.088 -1.02893 236.083 0.87977 234.227 0.381845L234.15 1.61629C232.868 1.52293 231.639 1.84455 230.047 2.31135L230.141 3.41094C228.765 4.28231 226.621 2.5603 224.451 2.62255C224.599 2.20761 225.15 2.33206 225.536 2.59139C222.953 0.0602729 220.065 4.2823 217.72 2.43583C217.132 2.81965 216.711 2.67438 216.298 2.3943C216.352 2.3943 216.401 2.37356 216.442 2.34244C216.383 2.33207 216.294 2.32167 216.199 2.32167C215.944 2.12458 215.675 1.90678 215.388 1.72006C215.63 1.98977 215.868 2.21794 216.069 2.32167C215.616 2.33205 214.93 2.45653 214.262 2.71587L213.98 1.53335C213.926 1.54372 213.881 1.54369 213.823 1.56443C213.163 1.11837 213.289 2.11424 213.639 3.00636C213.298 3.19308 212.989 3.42128 212.746 3.70136C212.217 1.79265 210.984 4.30302 210.258 2.26982C209.8 3.24492 206.881 2.9545 206.518 5.02919C206.495 4.75948 206.298 4.6246 206.661 4.61423C205.912 4.36527 205.168 4.11631 204.495 4.68685L204.181 3.18269L202.54 5.16405C201.549 4.23044 201.141 3.70139 202.132 2.56031C199.746 4.29267 200.199 3.19304 198.168 4.91504L198.271 3.95031C197.549 3.97106 196.387 5.24704 195.952 4.44828C194.338 2.58106 187.943 4.07483 183.795 2.30097C184.593 5.16404 181.867 0.993911 181.696 3.20346C181.454 2.52918 180.88 2.13497 181.553 1.56443C179.432 2.19721 178.369 0.444113 176.903 2.29059C176.661 1.60594 177.36 1.30508 177.145 0.900517C176.974 1.04575 176.468 1.48148 176.248 1.07691C176.033 0.672347 176.562 0.516738 176.898 0.226281C174.732 0.309269 174.508 2.38392 174.347 4.33413C173.252 3.40052 172.705 3.525 171.907 4.79056C171.526 4.14741 170.889 3.47316 172.239 3.26569C171.481 3.16196 167.616 2.26983 167.535 3.83622C167.297 3.44203 166.476 3.71173 166.279 3.88808C164.58 3.77397 164.432 3.62874 162.763 3.7636L163.225 4.02294C162.562 5.90053 161.84 4.42754 160.494 4.64538L160.535 4.44828C157.454 3.05824 159.203 5.08103 156.162 3.50426L156.324 4.67647C156.037 7.19722 153.633 3.16196 151.862 4.10594L152.499 4.78024C151.535 5.63086 149.808 1.32586 148.844 0.993906C148.633 0.776064 149.176 0.641219 149.472 0.485617C146.938 -1.02891 149.14 2.02089 147.252 2.36321C146.907 1.53333 147.705 0.257396 146.431 0.0914212C145.799 -0.582853 142.736 2.74704 141.005 1.14953C141.386 1.79269 141.763 2.43578 140.889 2.90259C139.543 3.12043 137.256 0.454459 136.037 2.45653C135.866 2.28019 135.803 2.11423 135.794 1.95863C134.767 2.46693 132.453 2.79885 131.83 3.87769C130.884 -0.178327 125.435 5.80716 125.462 2.07272L122.301 2.24912L122.386 1.86524C120.364 1.6059 119.651 2.49805 118.938 3.39017C118.471 3.13083 118.812 2.78849 118.852 2.59139C115.897 1.82376 115.606 1.97937 113.126 3.83622L112.87 2.62255C112.198 3.32794 108.601 0.703457 105.704 2.10387C105.731 1.96902 105.794 1.73041 106.023 1.56443C102.762 2.97522 98.2197 -1.81732 97.0224 2.59139L94.8699 3.67027C97.6547 4.02297 94.4528 5.57898 95.6008 6.31549C94.5066 6.57483 92.7712 4.97732 94.1165 4.75947L94.3273 4.97728C94.8205 2.67437 90.8698 4.15779 90.946 2.59139C85.4706 2.69513 80.1342 1.4296 75.004 1.32586L75.596 3.11007L73.8067 3.00636C73.3359 2.59142 73.1744 1.60591 74.4525 1.67853C73.7798 0.661928 72.3134 2.52916 72.2775 2.92335C69.7797 2.20758 73.2551 0.838302 72.4883 0.796808L71.4479 0.931668L71.6811 1.13915C70.8381 1.87566 70.7618 2.64329 69.2282 2.56031C68.2551 2.20761 68.7304 1.46072 68.3492 1.3881C68.3492 1.26362 68.2237 1.20139 67.7618 1.33625L65.5061 1.191L66.4075 2.60178C65.4075 3.2968 64.2864 2.5292 65.3268 4.12671C63.7976 1.65783 56.9185 3.25533 55.9813 2.49807C54.5822 3.53541 53.201 3.52504 51.4879 3.40055C51.914 3.69101 52.1696 5.27815 50.6942 5.09143C51.2323 1.81342 47.9901 3.68064 46.7973 1.32586C47.8646 2.88188 42.5999 1.73039 44.2771 3.93993C43.0438 3.68059 44.2008 2.71588 43.2681 1.94825C40.3398 3.23455 36.8061 1.15986 33.1827 1.61629C33.1289 2.0416 33.7343 2.69517 32.9585 3.3487L31.0436 1.21177C30.3306 1.42961 30.3889 3.70137 29.0795 2.21797C29.2633 2.58104 29.5414 3.12047 29.0615 3.26569C21.9628 1.2325 14.5635 5.10178 7.34816 1.24286C8.32575 2.06236 7.67552 2.1557 6.93111 2.1972C7.41542 2.39429 6.92214 3.25531 7.0208 3.83622L3.99832 2.24912C3.45123 3.86737 0.765079 2.39429 0.451172 3.93993L1.40635 3.64951C0.137267 5.48561 3.19113 7.6848 3.01176 10.0292C4.42882 7.94414 6.76967 13.0582 9.09707 10.0707C9.61277 10.5375 8.6576 10.8279 8.93563 11.3674C9.52757 10.3611 10.2406 10.1433 11.5635 10.579L11.4155 10.8279C15.133 10.5375 16.734 11.523 20.9134 12.1454L20.604 10.9939C21.5009 11.1392 21.6937 11.5022 22.1107 11.7926C23.1377 10.0292 19.5905 11.7201 20.5233 9.76987C21.7161 12.1143 26.8552 9.74912 27.6669 12.4255C29.0481 12.4255 27.2588 11.0873 28.64 11.0873L29.0077 11.8134L29.3575 10.8798C30.2634 11.025 30.7208 11.9275 30.7566 12.5396C30.5369 12.4669 30.1333 12.7159 29.8956 12.7677C31.0705 13.6184 33.2051 12.4566 33.6087 12.7263L32.2813 12.2906C36.0527 11.5852 40.6537 12.5084 44.295 11.0146L44.017 10.4649C46.7973 9.4379 46.2457 11.0561 49.2996 10.579L49.1874 10.7138C49.7973 10.164 50.6135 9.88396 51.4521 9.9462C50.6808 10.5894 52.905 11.1806 51.8915 11.8964C54.905 10.7968 53.3848 11.0354 55.3714 9.00218L55.8333 9.90466C56.5104 9.08516 56.5687 8.64954 58.0934 8.41095C56.8423 9.19933 59.0665 9.79057 57.6674 10.8279C60.8693 12.7989 62.4209 8.81551 63.8873 11.7097C65.3537 9.19932 61.1159 10.3196 61.941 9.78019C61.2504 8.96068 63.1518 7.90265 64.1563 8.15161C65.1788 8.20348 65.8963 11.357 68.4703 11.3051C68.2147 11.2947 68.1968 11.4814 67.9411 11.4711C68.9053 12.1038 69.8246 10.5997 71.0085 11.6371C71.6677 10.1226 72.5421 11.72 72.7305 9.79057L70.3717 10.247C71.708 9.73871 72.9637 7.46693 75.1655 8.56651C74.9951 8.9607 74.3404 9.46903 73.8874 9.75948C74.5332 10.33 75.1296 9.38605 75.7978 9.96697C75.6095 11.9068 72.9323 10.3922 71.4973 11.8653C72.1879 12.6848 74.2058 10.4545 73.4883 12.5603C74.5242 9.89435 76.022 12.8923 77.7619 10.8591L77.6454 12.0209C77.9189 11.8342 78.4929 11.2948 78.9996 11.3155L78.0803 12.8197C79.4884 11.5334 80.7979 13.94 82.1522 13.2449C79.3225 13.2761 81.5154 11.8446 80.318 11.0043C83.8114 9.44829 82.3271 14.0437 86.2374 13.4835C85.7083 13.6495 84.2509 12.7885 85.076 12.2491C85.8204 12.4877 86.8025 12.9337 87.2599 13.5458C89.8518 13.3072 86.8608 12.3528 87.9639 11.6371C88.8473 13.0479 89.2375 11.0665 90.372 10.6101L90.381 11.7926C93.3317 12.5603 91.1658 9.33415 93.8205 10.2574L92.6949 11.886L94.0806 11.4711L93.7936 12.8093C95.3004 11.8134 95.7712 12.0727 97.2466 12.4566C96.9058 11.6267 97.4394 10.3196 98.7489 10.2782C99.6413 10.9836 98.2466 11.3985 100.103 11.2325C99.6861 11.969 99.2242 12.8922 98.417 11.803C98.3363 12.1868 98.0045 12.5396 97.9193 12.9234C98.8789 13.7325 100.332 13.1101 101.005 13.0997C100.744 13.0582 100.439 12.996 100.278 12.8197L102.964 11.191C103.386 11.6371 103.049 11.9898 102.718 12.3425C103.26 12.218 103.637 11.6786 104.44 11.5748C104.233 12.5292 104.283 13.525 103.148 13.9711L105.709 12.913C105.879 13.3279 107.023 14.0645 106.691 14.4172C108.108 14.9877 110.175 12.5707 112.054 13.328C112.153 13.1412 112.35 12.9648 112.749 12.83C114.516 13.0582 116.081 14.2408 118.18 12.9338L119.368 14.6557C121.009 14.2719 117.758 12.4773 120.494 11.8446C122.431 11.3051 121.216 13.3175 121.893 13.7947C122.857 12.9337 124.53 11.1806 126.305 12.5914C125.718 12.913 125.256 12.6536 124.704 12.7781L124.731 12.7367ZM144.978 12.135C144.584 12.3736 143.803 13.1308 143.516 12.4358C143.965 11.0872 144.31 11.7408 144.978 12.135ZM175.764 9.64533C175.472 10.0291 175.019 9.8321 174.513 9.37567C174.88 9.28231 175.302 9.33412 175.764 9.64533ZM261.545 3.23454C261.545 3.23454 261.519 3.26571 261.505 3.28646C260.631 2.79891 260.94 2.99595 261.545 3.23454ZM263.362 3.79475C263.545 3.63915 263.532 3.47314 263.456 3.30717C263.326 3.59762 262.918 3.60801 262.456 3.51465C262.581 3.82585 262.819 4.04371 263.362 3.79475ZM68.1609 1.7823L68.5151 2.09349C67.7169 2.43581 67.9412 2.12462 68.1609 1.7823Z"
                            fill="#AB3535" />
                    </svg>
                    <p class="gal-p">Looking for an enriching experience? Join our workshops.
                        <br><br>
                        Workshops at OlogyGirls are designed to be highly engaging, hands-on learning
                        experiences, with a limited batch size. What’s more, these programs are available in multiple
                        topics, and are facilitated by niche experts. Embark on a journey of tapping into your
                        potential and discovering yourself.

                        <br><br>
                        Go through our calendar for upcoming workshops, take your pick and register today!
                    </p>

                </div>
            </div>
        </div>

        <?php
        // Collect all events from all categories into a single array
        $allEvents = [];
        foreach ($eventDetails as $categoryId => $categoryEvents) {
            foreach ($categoryEvents as $event) {
                $event['category_id'] = $categoryId; // Add category ID to each event
                $allEvents[] = $event;
            }
        }

        // Function to sort the event details by event_date
        function sortByEventDate($a, $b)
        {
            return strtotime($b['event_date']) - strtotime($a['event_date']);
        }

        // Sort the combined array of all events by event_date
        usort($allEvents, 'sortByEventDate');

        // Pagination setup
        $eventsPerPage = 6; // Number of events to display per page
        $totalEvents = count($allEvents); // Total number of events
        $totalPages = ceil($totalEvents / $eventsPerPage); // Total number of pages

        // Get current date
        $currentDate = date('Y-m-d');

        // Pass the pagination data to JavaScript
        echo "<script>const totalPages = $totalPages;</script>";
        ?>

        <div class="container">
            <div class="row">
                <div class="col-lg-2 event_left_col">
                    <a href="javascript:void(0);" onclick="showAllEventDetails()" style="color:black">
                        <div class="event_head">All Categories</div>
                    </a>
                    <?php foreach ($Data as $item) { ?>
                        <a href="javascript:void(0);" onclick="filterEventsByCategory(<?php echo $item['id']; ?>)"
                            style="color:black">
                            <div id="category-<?php echo $item['id']; ?>" class="event_title event_title_btn">
                                <?php echo $item['category_name']; ?>
                            </div>
                        </a>
                    <?php } ?>
                </div>
                <div class="col-lg-10">
                    <div class="event_right_col">
                        <div class="event_head" style="border-bottom: 1px solid black;">Events</div>
                        <button class="btn-event mt-4" style="font-size:14px" onclick="filterByUpcoming()">Upcoming Events</button>
                        <button class="btn-event mt-4" style="font-size:14px" onclick="filterByPast()">Past Events</button>
                        <div class="row pt-5" id="event-details-container">
                            <div class="row">
                                <?php foreach ($allEvents as $event) { ?>
                                    <div class="col-lg-4 event-details category-<?php echo $event['category_id']; ?>"
                                        data-event-date="<?php echo $event['event_date']; ?>">
                                        <a href="event_details/<?php echo $event['id']; ?>">
                                            <div class="event_box">
                                                <img src="<?php echo BASEURL; ?>images/posting/<?php echo $event['photo']; ?>" class="event_image"
                                                    alt="<?php echo $event['event_name']; ?>" />
                                                <div class="event_content_box">
                                                    <div class="event_name"><?php echo $event['event_name']; ?></div>
                                                    <div class="event_detail">
                                                        <div style="padding-bottom:10px">
                                                            <i class="fas fa-calendar-alt" style="padding-right: 5px;"></i>
                                                            <?php echo date('F j, Y', strtotime($event['event_date'])); ?>
                                                        </div>
                                                        <div style="padding-bottom:10px">
                                                            <i class="fas fa-clock" style="padding-right: 5px;"></i>
                                                            <?php echo $event['starting_time']; ?> - <?php echo $event['ending_time']; ?>
                                                        </div>
                                                        <div style="padding-bottom:10px; display: flex; align-items: flex-start;">
                                                            <i class="fas fa-map-marker-alt" style="padding-right: 12px;"></i>
                                                            <span><?php echo $event['address']; ?></span>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </a>
                                    </div>
                                <?php } ?>
                            </div>
                        </div>
                        <div class="pagination-controls">
                            <a href="javascript:void(0);" class="pagination-button" id="prev-button" onclick="prevPage()">Previous</a>
                            <a href="javascript:void(0);" class="pagination-button" id="next-button" onclick="nextPage()">Next</a>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <script>
            // Get current date from PHP
            const currentDate = '<?php echo $currentDate; ?>';
            let selectedCategoryId = null;
            let currentPage = 1;
            const eventsPerPage = <?php echo $eventsPerPage; ?>;

            // Function to show all event details on page load
            function showAllEventDetails() {
                selectedCategoryId = null; // Clear selected category
                displayEvents(currentPage); // Display events for the current page
                setActiveCategory(null); // No category should be active
            }

            // Function to filter events by category and highlight the active category
            function filterEventsByCategory(categoryId) {
                selectedCategoryId = categoryId; // Update the selected category
                currentPage = 1; // Reset to the first page
                displayEvents(currentPage); // Display events for the first page in this category
                setActiveCategory(selectedCategoryId); // Keep the category active
            }

            // Function to filter events by upcoming dates
            function filterByUpcoming() {
                displayEvents(currentPage, true, false);
                setActiveCategory(selectedCategoryId); // Keep the category active
            }

            // Function to filter events by past dates
            function filterByPast() {
                displayEvents(currentPage, false, true);
                setActiveCategory(selectedCategoryId); // Keep the category active
            }

            // Main function to display events with pagination
            function displayEvents(page, filterUpcoming = false, filterPast = false) {
                currentPage = page;
                const start = (page - 1) * eventsPerPage;
                const end = start + eventsPerPage;
                let eventsToDisplay = 0;

                // Collect all filtered events
                const filteredEvents = [];

                document.querySelectorAll('.event-details').forEach(function(element) {
                    const eventDate = element.getAttribute('data-event-date');
                    const isUpcoming = new Date(eventDate) >= new Date(currentDate);
                    const isPast = new Date(eventDate) < new Date(currentDate);

                    // Apply filters based on category and date
                    const categoryMatch = selectedCategoryId === null || element.classList.contains('category-' + selectedCategoryId);
                    const dateMatch = (!filterUpcoming && !filterPast) || (filterUpcoming && isUpcoming) || (filterPast && isPast);

                    if (categoryMatch && dateMatch) {
                        filteredEvents.push({
                            element: element,
                            date: new Date(eventDate)
                        });
                    } else {
                        element.style.display = 'none';
                    }
                });

                // Sort filtered events by date (most recent first)
                filteredEvents.sort(function(a, b) {
                    return b.date - a.date;
                });

                // Display only the events for the current page
                filteredEvents.forEach(function(event, index) {
                    if (index >= start && index < end) {
                        event.element.style.display = 'block';
                        eventsToDisplay++;
                    } else {
                        event.element.style.display = 'none';
                    }
                });

                // Update pagination controls
                document.getElementById('prev-button').style.display = (currentPage > 1) ? 'inline-block' : 'none';
                document.getElementById('next-button').style.display = (eventsToDisplay < eventsPerPage) ? 'none' : 'inline-block';

                // Calculate total pages based on the number of filtered events
                const totalPages = Math.ceil(filteredEvents.length / eventsPerPage);

                // Enable/disable next/prev buttons based on the current page
                document.getElementById('prev-button').disabled = (currentPage <= 1);
                document.getElementById('next-button').disabled = (currentPage >= totalPages);
            }

            // Function to display all events without pagination
            function displayAllEvents() {
                document.querySelectorAll('.event-details').forEach(function(element) {
                    const categoryMatch = selectedCategoryId === null || element.classList.contains('category-' + selectedCategoryId);

                    if (categoryMatch) {
                        element.style.display = 'block';
                    } else {
                        element.style.display = 'none';
                    }
                });

                // Hide pagination controls since all events are being displayed
                document.getElementById('prev-button').style.display = 'none';
                document.getElementById('next-button').style.display = 'none';
            }

            // Function to go to the previous page
            function prevPage() {
                if (currentPage > 1) {
                    displayEvents(currentPage - 1);
                }
            }

            // Function to go to the next page
            function nextPage() {
                if (currentPage < totalPages) {
                    displayEvents(currentPage + 1);
                }
            }

            // Function to set the active category button
            function setActiveCategory(categoryId) {
                // Remove the 'active' class from all category buttons
                document.querySelectorAll('.event_title_btn').forEach(function(element) {
                    element.classList.remove('active');
                });

                // Add the 'active' class to the selected category button
                if (categoryId !== null) {
                    document.getElementById('category-' + categoryId).classList.add('active');
                }
            }

            // Call the function to show all event details when the page loads
            document.addEventListener("DOMContentLoaded", showAllEventDetails);
        </script>